/**
 * Ð¨Ð°Ð±Ð»Ð¾Ð½Ñ‹ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð´Ð»Ñ Ð±Ð¾Ñ‚Ð°
 */

export const MESSAGES = {
  // ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ
  WELCOME: (firstName) => `
ðŸ‘‹ ÐŸÑ€Ð¸Ð²ÐµÑ‚, ${firstName}!

Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½ Ð½Ð°Ñ‚ÑƒÑ€Ð°Ð»ÑŒÐ½Ñ‹Ñ… ÑÐ¾ÐºÐ¾Ð²!

ðŸŠ Ð¡Ð²ÐµÐ¶Ð¸Ðµ ÑÐ¾ÐºÐ¸ Ð¸Ð· Ð½Ð°Ñ‚ÑƒÑ€Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ñ„Ñ€ÑƒÐºÑ‚Ð¾Ð² Ð¸ Ð¾Ð²Ð¾Ñ‰ÐµÐ¹
ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ° Ð¿Ð¾ Ð³Ð¾Ñ€Ð¾Ð´Ñƒ
ðŸ’š 100% Ð½Ð°Ñ‚ÑƒÑ€Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¸Ð½Ð³Ñ€ÐµÐ´Ð¸ÐµÐ½Ñ‚Ñ‹
â­ ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾Ðµ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ð¼ Ñ†ÐµÐ½Ð°Ð¼

ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð½Ð¸Ð¶Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ÑŒ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³ Ð¸ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·:
`,

  // ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸
  HELP: `
ðŸ¤– *Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹:*

ðŸ¹ *ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ:*
â€¢ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÐºÐ½Ð¾Ð¿ÐºÑƒ "ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¼ÐµÐ½ÑŽ" Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð°
â€¢ ðŸ“‹ ÐœÐ¾Ð¸ Ð·Ð°ÐºÐ°Ð·Ñ‹ - Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð²Ð°ÑˆÐ¸Ñ… Ð·Ð°ÐºÐ°Ð·Ð¾Ð²
â€¢ ðŸ“ž ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹ - Ð½Ð°ÑˆÐ¸ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹

ðŸ‘¨â€ðŸ’» *Ð”Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¾Ð²:*
â€¢ /admin - Ð¿Ð°Ð½ÐµÐ»ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°
â€¢ /stats - ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð·Ð°ÐºÐ°Ð·Ð¾Ð²
â€¢ /users - ÑÐ¿Ð¸ÑÐ¾Ðº Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹

â“ *ÐÑƒÐ¶Ð½Ð° Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ?*
ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð½Ð°Ð¼ Ð² Ð»ÑŽÐ±Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ, Ð¼Ñ‹ Ð²ÑÐµÐ³Ð´Ð° Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ!
`,

  // ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹
  CONTACTS: `
ðŸ“ž *ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ*

ðŸ“± *Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½:* +998 90 123 45 67
ðŸ“§ *Email:* info@juices.uz
ðŸ• *Ð ÐµÐ¶Ð¸Ð¼ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹:* Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ð¾ 9:00 - 21:00

ðŸ“ *ÐÐ´Ñ€ÐµÑ:* 
Ð³. Ð¢Ð°ÑˆÐºÐµÐ½Ñ‚, ÑƒÐ». ÐŸÑ€Ð¸Ð¼ÐµÑ€Ð½Ð°Ñ, Ð´Ð¾Ð¼ 1

ðŸšš *Ð”Ð¾ÑÑ‚Ð°Ð²ÐºÐ°:*
â€¢ ÐŸÐ¾ Ð³Ð¾Ñ€Ð¾Ð´Ñƒ: 15,000 ÑÑƒÐ¼
â€¢ ÐŸÑ€Ð¸ Ð·Ð°ÐºÐ°Ð·Ðµ Ð¾Ñ‚ 100,000 ÑÑƒÐ¼ - Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ° Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾
â€¢ Ð’Ñ€ÐµÐ¼Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸: 30-60 Ð¼Ð¸Ð½ÑƒÑ‚

ðŸ’¬ ÐŸÐ¸ÑˆÐ¸Ñ‚Ðµ Ð½Ð°Ð¼ Ð² Ð»ÑŽÐ±Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ!
`,

  // Ðž ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¸
  ABOUT: `
ðŸ¹ *Ðž Ð½Ð°Ñ*

ÐœÑ‹ - ÐºÐ¾Ð¼Ð°Ð½Ð´Ð° ÑÐ½Ñ‚ÑƒÐ·Ð¸Ð°ÑÑ‚Ð¾Ð² Ð·Ð´Ð¾Ñ€Ð¾Ð²Ð¾Ð³Ð¾ Ð¿Ð¸Ñ‚Ð°Ð½Ð¸Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ Ð½Ð°Ñ‚ÑƒÑ€Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÑÐ¾ÐºÐ¸ Ð¸Ð· Ð¾Ñ‚Ð±Ð¾Ñ€Ð½Ñ‹Ñ… Ñ„Ñ€ÑƒÐºÑ‚Ð¾Ð² Ð¸ Ð¾Ð²Ð¾Ñ‰ÐµÐ¹.

ðŸŒ± *ÐÐ°ÑˆÐ¸ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ñ‹:*
â€¢ Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÑÐ²ÐµÐ¶Ð¸Ðµ Ð¸ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ Ð¸Ð½Ð³Ñ€ÐµÐ´Ð¸ÐµÐ½Ñ‚Ñ‹
â€¢ ÐÐ¸ÐºÐ°ÐºÐ¸Ñ… ÐºÐ¾Ð½ÑÐµÑ€Ð²Ð°Ð½Ñ‚Ð¾Ð² Ð¸ Ð¸ÑÐºÑƒÑÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ñ… Ð´Ð¾Ð±Ð°Ð²Ð¾Ðº
â€¢ Ð¡Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸ Ð¿Ñ€Ð¸Ð³Ð¾Ñ‚Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ
â€¢ Ð¡Ñ‚Ñ€Ð¾Ð³Ð¸Ð¹ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð°

ðŸ† *ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ð²Ñ‹Ð±Ð¸Ñ€Ð°ÑŽÑ‚ Ð½Ð°Ñ:*
â€¢ Ð‘Ð¾Ð»ÐµÐµ 50 Ð²Ð¸Ð´Ð¾Ð² ÑÐ¾ÐºÐ¾Ð²
â€¢ Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ°
â€¢ Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ñ†ÐµÐ½Ñ‹
â€¢ ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ Ð¾Ñ‚Ð·Ñ‹Ð²Ñ‹ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²

Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾, Ñ‡Ñ‚Ð¾ Ð²Ñ‹Ð±Ð¸Ñ€Ð°ÐµÑ‚Ðµ Ð½Ð°Ñ! ðŸ’š
`,

  // ÐžÑˆÐ¸Ð±ÐºÐ¸
  ERRORS: {
    GENERAL: 'ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð·Ð¶Ðµ.',
    NO_ORDERS: 'Ð£ Ð²Ð°Ñ Ð¿Ð¾ÐºÐ° Ð½ÐµÑ‚ Ð·Ð°ÐºÐ°Ð·Ð¾Ð².',
    ORDER_NOT_FOUND: 'Ð—Ð°ÐºÐ°Ð· Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½.',
    ACCESS_DENIED: 'Ð£ Ð²Ð°Ñ Ð½ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº ÑÑ‚Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸.',
    INVALID_COMMAND: 'ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð°Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ /help Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ñ… ÐºÐ¾Ð¼Ð°Ð½Ð´.'
  },

  // Ð—Ð°ÐºÐ°Ð·Ñ‹
  ORDER: {
    CONFIRMED: (orderNumber) => `âœ… Ð’Ð°Ñˆ Ð·Ð°ÐºÐ°Ð· â„–${orderNumber} Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½!\nÐœÑ‹ ÑÐ²ÑÐ¶ÐµÐ¼ÑÑ Ñ Ð²Ð°Ð¼Ð¸ Ð² Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐµÐµ Ð²Ñ€ÐµÐ¼Ñ.`,
    PREPARING: (orderNumber) => `ðŸ‘¨â€ðŸ³ Ð’Ð°Ñˆ Ð·Ð°ÐºÐ°Ð· â„–${orderNumber} Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑÑ!\nÐ¡Ð¾Ð²ÑÐµÐ¼ ÑÐºÐ¾Ñ€Ð¾ Ð±ÑƒÐ´ÐµÑ‚ Ð³Ð¾Ñ‚Ð¾Ð².`,
    DELIVERING: (orderNumber) => `ðŸšš Ð’Ð°Ñˆ Ð·Ð°ÐºÐ°Ð· â„–${orderNumber} Ð¿ÐµÑ€ÐµÐ´Ð°Ð½ ÐºÑƒÑ€ÑŒÐµÑ€Ñƒ!\nÐžÐ¶Ð¸Ð´Ð°Ð¹Ñ‚Ðµ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÑƒ Ð² Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ 30-60 Ð¼Ð¸Ð½ÑƒÑ‚.`,
    COMPLETED: (orderNumber) => `âœ¨ Ð’Ð°Ñˆ Ð·Ð°ÐºÐ°Ð· â„–${orderNumber} Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½!\nÐ¡Ð¿Ð°ÑÐ¸Ð±Ð¾ Ð·Ð° Ð¿Ð¾ÐºÑƒÐ¿ÐºÑƒ! Ð‘ÑƒÐ´ÐµÐ¼ Ñ€Ð°Ð´Ñ‹ Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ð²Ð°Ñ ÑÐ½Ð¾Ð²Ð°.`,
    CANCELLED: (orderNumber) => `âŒ Ðš ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, Ð²Ð°Ñˆ Ð·Ð°ÐºÐ°Ð· â„–${orderNumber} Ð¾Ñ‚Ð¼ÐµÐ½ÐµÐ½.\nÐŸÐ¾ Ð²ÑÐµÐ¼ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°Ð¼ Ð¾Ð±Ñ€Ð°Ñ‰Ð°Ð¹Ñ‚ÐµÑÑŒ Ðº Ð½Ð°ÑˆÐ¸Ð¼ Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ð°Ð¼.`
  },

  // ÐÐ´Ð¼Ð¸Ð½
  ADMIN: {
    WELCOME: 'Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð¿Ð°Ð½ÐµÐ»ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°',
    NO_ORDERS: 'ÐÐ¾Ð²Ñ‹Ñ… Ð·Ð°ÐºÐ°Ð·Ð¾Ð² Ð½ÐµÑ‚',
    NO_STATS: 'Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¿Ð¾ÐºÐ° Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð°'
  }
}

/**
 * Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ð·Ð°ÐºÐ°Ð· Ð´Ð»Ñ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ
 */
export const formatOrder = (order) => {
  const statusEmoji = {
    pending: 'â³',
    confirmed: 'âœ…', 
    preparing: 'ðŸ‘¨â€ðŸ³',
    delivering: 'ðŸšš',
    completed: 'âœ¨',
    cancelled: 'âŒ'
  }

  const statusText = {
    pending: 'ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ',
    confirmed: 'ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½',
    preparing: 'Ð“Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑÑ', 
    delivering: 'Ð’ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐµ',
    completed: 'Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½',
    cancelled: 'ÐžÑ‚Ð¼ÐµÐ½ÐµÐ½'
  }

  const date = new Date(order.created_at).toLocaleDateString('ru-RU', {
    day: 'numeric',
    month: 'short',
    hour: '2-digit',
    minute: '2-digit'
  })

  let message = `${statusEmoji[order.status]} *Ð—Ð°ÐºÐ°Ð· â„–${order.order_number}*\n`
  message += `ðŸ“… ${date}\n`
  message += `ðŸ’° ${order.total_amount} ÑÑƒÐ¼\n`
  message += `ðŸ“ ${statusText[order.status]}\n`

  if (order.order_items && order.order_items.length > 0) {
    message += `\nðŸ¹ *Ð¡Ð¾ÑÑ‚Ð°Ð² Ð·Ð°ÐºÐ°Ð·Ð°:*\n`
    order.order_items.forEach((item) => {
      message += `  â€¢ ${item.juice_name} x${item.quantity}\n`
    })
  }

  if (order.comment) {
    message += `\nðŸ’¬ *ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹:* ${order.comment}\n`
  }

  if (order.phone_number) {
    message += `ðŸ“ž ${order.phone_number}\n`
  }

  return message
}

/**
 * Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ
 */
export const formatStats = (stats) => {
  return `ðŸ“Š *Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°*

*Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ:*
ðŸ“¦ Ð—Ð°ÐºÐ°Ð·Ð¾Ð²: ${stats.today.count}
ðŸ’° Ð’Ñ‹Ñ€ÑƒÑ‡ÐºÐ°: ${stats.today.revenue.toFixed(0)} ÑÑƒÐ¼

*Ð—Ð° Ð½ÐµÐ´ÐµÐ»ÑŽ:*
ðŸ“¦ Ð—Ð°ÐºÐ°Ð·Ð¾Ð²: ${stats.week.count}
ðŸ’° Ð’Ñ‹Ñ€ÑƒÑ‡ÐºÐ°: ${stats.week.revenue.toFixed(0)} ÑÑƒÐ¼

*Ð—Ð° Ð¼ÐµÑÑÑ†:*
ðŸ“¦ Ð—Ð°ÐºÐ°Ð·Ð¾Ð²: ${stats.month.count}
ðŸ’° Ð’Ñ‹Ñ€ÑƒÑ‡ÐºÐ°: ${stats.month.revenue.toFixed(0)} ÑÑƒÐ¼

*Ð’ÑÐµÐ³Ð¾:*
ðŸ“¦ Ð’ÑÐµÐ³Ð¾ Ð·Ð°ÐºÐ°Ð·Ð¾Ð²: ${stats.total.count}
ðŸ‘¥ ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹: ${stats.total.users}
`
}

/**
 * Ð­ÐºÑ€Ð°Ð½Ð¸Ñ€ÑƒÐµÑ‚ ÑÐ¿ÐµÑ†ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Markdown
 */
export const escapeMarkdown = (text) => {
  return text.replace(/[_*\[\]()~`>#+=|{}.!-]/g, '\\$&')
}